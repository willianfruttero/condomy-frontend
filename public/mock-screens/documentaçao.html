<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Condomy – Documentação Completa</title>
  <style>
    :root {
      --primary: #004d99;
      --secondary: #3273dc;
      --bg: #f5f5f5;
      --surface: #fff;
      --text: #333;
      --muted: #666;
      --sidebar-width: 280px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body, html { height: 100%; font-family: Arial, sans-serif; background: var(--bg); color: var(--text); }

    /* SIDEBAR */
    aside.sidebar {
      position: fixed; top: 0; left: 0;
      width: var(--sidebar-width); height: 100%;
      background: var(--primary); color: white;
      overflow-y: auto; padding: 1.5em 1em;
    }
    aside.sidebar h2 {
      font-size: 1.4em; margin-bottom: .8em;
      border-bottom: 1px solid rgba(255,255,255,.3);
      padding-bottom: .4em;
    }
    .sidebar-section { margin-top: 1.5em; }
    .sidebar-section ul { list-style: none; margin-top: .5em; }
    .sidebar-section li { margin: .4em 0; }
    .sidebar-section a {
      color: white; text-decoration: none; font-size: .95em;
      display: block; padding: .3em .6em; border-radius: 4px;
    }
    .sidebar-section a:hover,
    .sidebar-section a.active {
      background: rgba(255,255,255,.2);
    }

    /* MAIN CONTENT */
    .main {
      margin-left: var(--sidebar-width); padding: 2em;
    }
    section.doc-section { margin-bottom: 3em; }
    section.doc-section h2 { color: var(--primary); margin-bottom: .5em; }
    section.doc-section p { margin-bottom: 1em; line-height: 1.5; }
    section.doc-section ul,
    section.doc-section ol { margin: .8em 0 1em 1.2em; }
    section.doc-section table {
      width: 100%; border-collapse: collapse; margin: 1em 0;
      background: var(--surface);
    }
    section.doc-section table th,
    section.doc-section table td {
      border: 1px solid #ccc; padding: .6em; text-align: left;
    }
    section.doc-section code { background: #eee; padding: .2em .4em; }

    /* MOCK SCREEN PREVIEW */
    #screen-preview {
      display: none; border: 1px solid #ccc;
      background: white; padding: 1em; margin-bottom: 2em;
      max-height: 70vh; overflow-y: auto;
    }
    #screen-preview .toolbar {
      text-align: right; margin-bottom: .5em;
    }
    #screen-preview .toolbar button {
      background: var(--secondary); color: white;
      border: none; padding: .4em .8em; border-radius: 4px;
      cursor: pointer;
    }
    #screen-preview .toolbar button:hover {
      background: var(--primary);
    }
  </style>
</head>
<body>

  <!-- SIDEBAR NAVIGATION -->
  <aside class="sidebar">
    <h2>Condomy Docs</h2>

    <div class="sidebar-section">
      <h2>Seções</h2>
      <ul>
        <li><a href="#visao-geral" class="doc-link">1. Visão Geral</a></li>
        <li><a href="#stack" class="doc-link">2. Stack Tecnológico</a></li>
        <li><a href="#estrutura-pastas" class="doc-link">3. Estrutura de Pastas</a></li>
        <li><a href="#mock-screens" class="doc-link">4. Mock-Screens & UI</a></li>
        <li><a href="#backend" class="doc-link">5. Backend</a></li>
        <li><a href="#frontend" class="doc-link">6. Frontend</a></li>
        <li><a href="#api-contracts" class="doc-link">7. API Contracts</a></li>
        <li><a href="#integracoes-boletos" class="doc-link">8. Integrações de Boletos</a></li>
        <li><a href="#cicd" class="doc-link">9. CI/CD & Deploy</a></li>
        <li><a href="#boas-praticas" class="doc-link">10. Boas Práticas</a></li>
        <li><a href="#glossario" class="doc-link">11. Glossário</a></li>
        <li><a href="#admin-access" class="doc-link">12. Admin & Acessos</a></li>
      </ul>
    </div>

    <div class="sidebar-section">
      <h2>Mock-Screens</h2>
      <ul>
        <li><a href="#" data-screen="mock-screens/agenda-comunicados.html">agenda-comunicados.html</a></li>
        <li><a href="#" data-screen="mock-screens/agenda-servicos.html">agenda-servicos.html</a></li>
        <li><a href="#" data-screen="mock-screens/boletos-e-pagamentos.html">boletos-e-pagamentos.html</a></li>
        <li><a href="#" data-screen="mock-screens/cadastro-comunicados.html">cadastro-comunicados.html</a></li>
        <li><a href="#" data-screen="mock-screens/cadastro-fornecedores.html">cadastro-fornecedores.html</a></li>
        <li><a href="#" data-screen="mock-screens/cadastro-unidade.html">cadastro-unidade.html</a></li>
        <li><a href="#" data-screen="mock-screens/condominios-gerenciador.html">condominios-gerenciador.html</a></li>
        <li><a href="#" data-screen="mock-screens/dashboard-admin-global.html">dashboard-admin-global.html</a></li>
        <li><a href="#" data-screen="mock-screens/documentos-condominio.html">documentos-condominio.html</a></li>
        <li><a href="#" data-screen="mock-screens/estatisticas-comunicados.html">estatisticas-comunicados.html</a></li>
        <li><a href="#" data-screen="mock-screens/eventos-condominio.html">eventos-condominio.html</a></li>
        <li><a href="#" data-screen="mock-screens/financeiro-condominio.html">financeiro-condominio.html</a></li>
        <li><a href="#" data-screen="mock-screens/fornecedores-visualizacao.html">fornecedores-visualizacao.html</a></li>
        <li><a href="#" data-screen="mock-screens/historico-envios.html">historico-envios.html</a></li>
        <li><a href="#" data-screen="mock-screens/historico-financeiro.html">historico-financeiro.html</a></li>
        <li><a href="#" data-screen="mock-screens/indicadores-condominio.html">indicadores-condominio.html</a></li>
        <li><a href="#" data-screen="mock-screens/leitura-comunicado.html">leitura-comunicado.html</a></li>
        <li><a href="#" data-screen="mock-screens/login.html">login.html</a></li>
        <li><a href="#" data-screen="mock-screens/meus-boletos.html">meus-boletos.html</a></li>
        <li><a href="#" data-screen="mock-screens/notificacoes-sistema.html">notificacoes-sistema.html</a></li>
        <li><a href="#" data-screen="mock-screens/ocorrencias.html">ocorrencias.html</a></li>
        <li><a href="#" data-screen="mock-screens/painel-financeiro.html">painel-financeiro.html</a></li>
        <li><a href="#" data-screen="mock-screens/painel-inadimplencia.html">painel-inadimplencia.html</a></li>
        <li><a href="#" data-screen="mock-screens/painel-manutencao.html">painel-manutencao.html</a></li>
        <li><a href="#" data-screen="mock-screens/painel-sindico.html">painel-sindico.html</a></li>
        <li><a href="#" data-screen="mock-screens/perfil-financeiro.html">perfil-financeiro.html</a></li>
        <li><a href="#" data-screen="mock-screens/perfil-morador.html">perfil-morador.html</a></li>
        <li><a href="#" data-screen="mock-screens/prestadores-servico.html">prestadores-servico.html</a></li>
        <li><a href="#" data-screen="mock-screens/protocolo-solicitacoes.html">protocolo-solicitacoes.html</a></li>
        <li><a href="#" data-screen="mock-screens/relatorios-financeiros.html">relatorios-financeiros.html</a></li>
        <li><a href="#" data-screen="mock-screens/solicitacoes-documentos.html">solicitacoes-documentos.html</a></li>
        <li><a href="#" data-screen="mock-screens/solicitacoes-gerente.html">solicitacoes-gerente.html</a></li>
        <li><a href="#" data-screen="mock-screens/visao-geral-comunicados.html">visao-geral-comunicados.html</a></li>
        <li><a href="#" data-screen="mock-screens/visao-geral-condominio.html">visao-geral-condominio.html</a></li>
      </ul>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="main">
    <!-- MOCKSCREEN PREVIEW -->
    <div id="screen-preview">
      <div class="toolbar">
        <button id="close-preview">Voltar à Documentação</button>
      </div>
      <div id="screen-content"></div>
    </div>

    <!-- 1. Visão Geral -->
    <section id="visao-geral" class="doc-section">
      <h2>1. Visão Geral</h2>
      <p>
        Condomy é uma plataforma SaaS multi-tenant que centraliza:
      </p>
      <ul>
        <li>Administração financeira e emissão de boletos</li>
        <li>Comunicação interna entre moradores</li>
        <li>Reservas de áreas comuns</li>
        <li>Dashboards e relatórios de performance</li>
      </ul>
    </section>

    <!-- 2. Stack Tecnológico -->
    <section id="stack" class="doc-section">
      <h2>2. Stack Tecnológico</h2>
      <p>Frontend: Next.js, React 18, TypeScript, Tailwind CSS, Styled-Components, Vite, React Query, React Hook Form, Zod, Axios, Chart.js, TanStack Table</p>
      <p>Backend: Java 17, Spring Boot 3, Spring Cloud Gateway/Config, Spring Data JPA, PostgreSQL, RabbitMQ, Swagger/OpenAPI</p>
      <p>Infra: Docker, Kubernetes (EKS), AWS (EC2, RDS, S3), Terraform; CI/CD: GitHub Actions, SonarCloud; Observabilidade: ELK, Prometheus + Grafana</p>
    </section>

    <!-- 3. Estrutura de Pastas -->
    <section id="estrutura-pastas" class="doc-section">
      <h2>3. Estrutura de Pastas</h2>
      <pre>
/condomy-backend
├─ api-gateway/
├─ auth-service/
├─ condominium-service/
├─ communication-service/
├─ finance-service/
├─ common-lib/
└─ infra/terraform/

/condomy-frontend
├─ public/mock-screens/
├─ scripts/generate-mocks.js
└─ src/
   ├─ app/
   ├─ components/
   ├─ hooks/
   ├─ services/
   ├─ styles/
   └─ utils/
      </pre>
    </section>

    <!-- 4. Mock-Screens & UI -->
    <section id="mock-screens" class="doc-section">
      <h2>4. Mock-Screens & UI Prototypes</h2>
      <p>
        Utilize estes protótipos HTML como referência para desenvolver os componentes React.
        Clique em qualquer nome de arquivo ao lado para visualizar sem sair desta página.
      </p>
      <p>
        <strong>Como funciona:</strong>
        o painel acima carrega a tela clicada em uma DIV, via fetch.
      </p>
    </section>

    <!-- 5. Backend -->
    <section id="backend" class="doc-section">
      <h2>5. Backend</h2>
      <ul>
        <li>Microserviços Spring Boot: gateway, auth, condomínio, comunicação, financeiro</li>
        <li>common-lib: DTOs e utilitários compartilhados</li>
        <li>Segurança: JWT + RBAC (Spring Security); validação adicional com Zod no front</li>
        <li>Persistência: PostgreSQL + Flyway; mensageria RabbitMQ</li>
        <li>Configuração central: Spring Cloud Config + Eureka</li>
      </ul>
    </section>

    <!-- 6. Frontend -->
    <section id="frontend" class="doc-section">
      <h2>6. Frontend</h2>
      <ul>
        <li>Next.js (app router & SSR/SSG) com prefetching</li>
        <li>React 18, TypeScript, Tailwind CSS, Styled-Components</li>
        <li>Estado: Context API (Auth, Sidebar, Notificações)</li>
        <li>Data fetching: React Query; Formulários: React Hook Form + Zod</li>
        <li>Teste: Jest + React Testing Library</li>
      </ul>
    </section>

    <!-- 7. API Contracts -->
    <section id="api-contracts" class="doc-section">
      <h2>7. API Contracts</h2>
      <p>
        Documentação Swagger em cada serviço (/swagger-ui.html) e JSON (/v3/api-docs).  
        Gateway consolida endpoints em /actuator.
      </p>
      <ul>
        <li>POST /auth/login – Retorna JWT</li>
        <li>GET /condominio/{id}/unidades – Lista unidades</li>
        <li>POST /comunicados – Cria novo comunicado</li>
        <li>POST /finance/payments – Registra pagamento</li>
      </ul>
    </section>

    <!-- 8. Integrações de Boletos -->
    <section id="integracoes-boletos" class="doc-section">
      <h2>8. Integrações de Boletos</h2>
      <ul>
        <li>Gerencianet & CobreBem: emissão, consulta, cancelamento, webhooks em /finance/webhook</li>
        <li>Itaú: CNAB240, certificado PJ, retorno “nosso número”</li>
        <li>Banco Inter: cobranças, Pix, upload de chaves/certificados</li>
      </ul>
    </section>

    <!-- 9. CI/CD & Deploy -->
    <section id="cicd" class="doc-section">
      <h2>9. CI/CD & Deploy</h2>
      <ul>
        <li>GitHub Actions: lint, build, testes (coverage ≥ 80%)</li>
        <li>Backend → Docker → Registry → Terraform → EKS</li>
        <li>Frontend → Vercel ou S3 + CloudFront</li>
        <li>Quality Gates: SonarCloud, análise de vulnerabilidades</li>
      </ul>
    </section>

    <!-- 10. Boas Práticas -->
    <section id="boas-praticas" class="doc-section">
      <h2>10. Boas Práticas</h2>
      <ul>
        <li>Commits semânticos (Conventional Commits)</li>
        <li>Pull Requests com code review obrigatório</li>
        <li>Lint & Prettier via Husky no pre-commit</li>
        <li>Testes unitários e integração em todos serviços</li>
        <li>Swagger atualizado e disponível em pipeline</li>
        <li>Validação de UI com mock-screens antes da implementação</li>
      </ul>
    </section>

    <!-- 11. Glossário -->
    <section id="glossario" class="doc-section">
      <h2>11. Glossário</h2>
      <ul>
        <li>JWT: JSON Web Token</li>
        <li>RBAC: Role-Based Access Control</li>
        <li>SSR: Server-Side Rendering</li>
        <li>SSG: Static-Site Generation</li>
        <li>Webhook: Callback HTTP para eventos</li>
        <li>CNAB240: Layout bancário de remessa/retorno</li>
        <li>Multi-tenant: Isolamento de dados por cliente</li>
      </ul>
    </section>

    <!-- 12. Administração Global & Acessos -->
    <section id="admin-access" class="doc-section">
      <h2>12. Administração Global & Gestão de Acessos</h2>

      <h3>Papéis e Hierarquia</h3>
      <ul>
        <li>Administrador Global: dono da plataforma, cria condomínios, define planos e integrações</li>
        <li>Síndico (Admin Cond.): gerencia residentes, finanças e comunicados do próprio condomínio</li>
        <li>Gerente de Área: supervisão de reservas, manutenção e prestadores</li>
        <li>Moderador/Colaborador: pode criar comunicados, solicitações e gerenciar documentos</li>
        <li>Morador: acesso de leitura; acompanha boletos, comunicados e solicitações</li>
      </ul>

      <h3>Modelos de Assinatura</h3>
      <table>
        <thead>
          <tr><th>Plano</th><th>Unidades</th><th>Valor Mensal</th></tr>
        </thead>
        <tbody>
          <tr><td>Básico</td><td>até 50</td><td>R$ 100,00</td></tr>
          <tr><td>Profissional</td><td>até 200</td><td>R$ 250,00</td></tr>
          <tr><td>Enterprise</td><td>ilimitado</td><td>sob consulta</td></tr>
        </tbody>
      </table>

      <h3>Formas de Pagamento</h3>
      <ul>
        <li>Pix (Webhook, QR Code dinâmico)</li>
        <li>Boleto (CNAB240, geração automática)</li>
        <li>Cartão de Crédito (Stripe ou Pagar.me)</li>
      </ul>

      <h3>Onboarding & Fluxo</h3>
      <ol>
        <li>Global Admin cria condomínio e escolhe plano.</li>
        <li>Convite por e-mail ao Síndico com link seguro.</li>
        <li>Síndico completa cadastro e definie forma de pagamento.</li>
        <li>Acesso liberado após confirmação de pagamento.</li>
      </ol>

      <h3>Endpoints de Administração</h3>
      <ul>
        <li>GET /api/admin/subscriptions – lista planos</li>
        <li>POST /api/admin/subscriptions – cria/atualiza plano</li>
        <li>GET /api/admin/users – lista administradores</li>
        <li>POST /api/admin/users – convida/atribui papel</li>
        <li>PUT /api/admin/users/{id}/role – altera permissão</li>
        <li>DELETE /api/admin/users/{id} – remove colaborador</li>
      </ul>
    </section>
  </main>

  <!-- SCRIPTS -->
  <script>
    // Scroll suave e marcação do link ativo
    document.querySelectorAll('.doc-link').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        document.querySelectorAll('.doc-link').forEach(a => a.classList.remove('active'));
        link.classList.add('active');
        const target = document.querySelector(link.getAttribute('href'));
        window.scrollTo({ top: target.offsetTop - 20, behavior: 'smooth' });
      });
    });

    // Carrega mock-screen na DIV de preview
    document.querySelectorAll('[data-screen]').forEach(link => {
      link.addEventListener('click', async e => {
        e.preventDefault();
        const url = link.getAttribute('data-screen');
        const preview = document.getElementById('screen-preview');
        const container = document.getElementById('screen-content');
        preview.style.display = 'block';
        container.innerHTML = '<p>Carregando…</p>';
        try {
          const res = await fetch(url);
          if (!res.ok) throw new Error();
          const html = await res.text();
          container.innerHTML = html;
        } catch {
          container.innerHTML = '<p style="color:red">Erro ao carregar mock-screen.</p>';
        }
      });
    });

    // Fecha preview
    document.getElementById('close-preview')
      .addEventListener('click', () => {
        document.getElementById('screen-preview').style.display = 'none';
        document.getElementById('screen-content').innerHTML = '';
      });
  </script>
</body>
</html>
